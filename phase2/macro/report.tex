\documentclass[12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage{cite}
\usepackage[hidelinks]{hyperref}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{mathtools}
\usepackage{caption}
\usepackage{fancyhdr}
\usepackage{multirow}

\pagestyle{fancy}
\fancyhf{}
\rhead{Macro Modules}
\lhead{\thesection}
\rfoot{\thepage}

\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\title{\textbf{Macro Modules Design Report}\\Team \#5}
\author{
  Mohamed Shawky\\
  \small\texttt{SEC:2, BN:16}
  \and
  Remonda Talaat\\
  \small\texttt{SEC:1, BN:20}
  \and
  Evram Youssef\\
  \small\texttt{SEC:1, BN:9}
  \and
  Mahmoud Adas\\
  \small\texttt{SEC:2, BN:21}
  \and
  Reham Gamal\\
  \small\texttt{SEC:1, BN:21}
  \and
  Mazen Amr\\
  \small\texttt{SEC:2, BN:8}
  \and
  Mohamed Ahmed Ibrahim\\
  \small\texttt{SEC:2, BN:9}
  \and
  Mahmoud Ahmed\\
  \small\texttt{SEC:2, BN:20}
}
\date{\today}

\begin{document}
    \thispagestyle{empty}

    \maketitle
    \tableofcontents
    \clearpage

    \pagenumbering{arabic}

    \section{Introduction}
    All macro modules are fully documented in the main document, see sections `0.14` , `0.5` . 

This report documents some of the implementation details in the macro modules, plus it contains the synthesis statistics for those modules.

    \section{IO}
    Implemented in `src/io.vhdl` , follows the subsection `0.14.1` in main refernce. 
    \subsection{Subunits}
    IO is composed of the subunits in `src/io\_subunits` :
    \begin{itemize}
        \item `src/io\_subunits/decompressor.vhdl` : 
        \begin{itemize}
            \item at each positive edge:
            \begin{itemize}
                \item takes the compressed input and decompress it into internal 128 bit buffer, and andvances fill\_i (initialzed with 0) (see section `0.16 Decompression` in main document).
                \item checks the current buffer state, if fill\_i - flush\_i > 32, that means that buffer has more thant 32 bit of uncompressed data, it flushes them.
            \end{itemize}
            \item uses couple of integer adders, and range\_extractor to figure out indices of buffer to fill.
        \end{itemize}
        \item `src/io\_subunits/range\_extractor.vhdl` : given a compressed 4bit packet and the previous range\_extractor output, outputs the indices in the buffer to iterate over so the decompressor knows where to fill the data for this packet. 
        \item `src/io\_subunits/next\_adr.vhdl` : given output from decmpressor (which can stay without change for couple of cycles because the buffer is filled), the next\_adr unit (nau) updates the address of the data, and figures out whether it has reached the final address or not. NAU advances the address by 1 in case float64 mode, otherwise it advances the address by 2 because of how data is padded in solver and interpolator. When NAU detects that address of some variable has finished (based on values extracted from the header (the first decompressed word)), NAU advances the address to the beginning of the next variable (see section `0.13 Input Format` in main document). 
        \item IO subunits also include integer operator units (adders, multipliers, incrementors ... . ) as following:
        \begin{itemize}
            \item `src/io\_subunits/decrementor.vhdl` 
            \item `src/io\_subunits/full\_adder.vhdl` 
            \item `src/io\_subunits/half\_adder.vhdl` 
            \item `src/io\_subunits/incrementor.vhdl` 
            \item `src/io\_subunits/int\_adder.vhdl` 
            \item `src/io\_subunits/int\_multiplier.vhdl` 
        \end{itemize}
        They are used in multiple units accross the project. 
    \end{itemize}

    \subsection{Synthesis Statistics}
    \begin{tabular}{||c|c|c||}
        \hline
        Area & Power & Time\\\hline\hline
        cell=271 Area per cell =12357 & 12356.2 & 242\\\hline
    \end{tabular}

    \section{Solver}
    Implemented in `src/solver.vhdl` and has some of its procedures defined in `src/solver\_pkg.vhdl` . 

    \begin{itemize}
        \item `src/solver.vhdl` : holds solver main process, which includes fixed and variable step orchestration FSMs, main data loading and reset/error handling. Also, the file contains some matrix manipulation procedures that aid the solver functionalities.
        \item `src/solver\_pkg.vhdl` : holds packages containing sub-procedures of solver. Procedures are divided into: Memory IO procedures, Matrix Manipulation procedures and Utils for sending data on output bus and address calculation.
        \item The directory `solver\_subtest` holds files for individual components test and integration.
    \end{itemize}

    All design details of solver are in subsection `0.14.2` in main document. 
    \subsection{Synthesis Statistics}
    \begin{tabular}{||c|c|c||}
        \hline
        Area & Power & Time\\\hline\hline
        cell=71924 Area =199753 & 38532.121094 & 55077.7\\\hline
    \end{tabular}

    \section{Interpolator}
    Implemented in `src/interp.vhdl` . 

    `src/interp.vhdl` : contains the whole implementation of the interpolator. The implementation is basically a main process that handles data loading, reset, errors and main orchestration FSM. The sub-functionalities are done through a set of procedures for: Memory IO, data outage on bus and range finding of t\_s.

    All design details of solver are in subsection `0.14.2` in main document. 
    \subsection{Synthesis Statistics}
    \begin{tabular}{||c|c|c||}
        \hline
        Area & Power & Time\\\hline\hline
        TODO & TODO & TODO\\\hline
    \end{tabular}
\end{document}